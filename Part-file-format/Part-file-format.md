### [Представление детали (компонента) во Fritzing](https://github.com/fritzing/fritzing-app/wiki/2.1-Part-file-format)

#### Введение

Деталь Fritzing состоит из нескольких файлов: одного файла метаданных ***.fzp*** и до четырех файлов ***.svg***. Каждая деталь может отображаться в четырех разных видах (макет - breadboard, схема - schematic, печатная плата - pcb и значок - icon детали), как правило с разным изображением для каждого вида. Решено не объединять все SVG и метаданные в один файл, потому что их раздельное хранение упрощает совместное использование одного изображения разными деталями (например, многие детали занимают одинаковую площадь печатной платы), а также потому, что хранение SVG в отдельных файлах упрощает доступ к отдельным изображениям, например, для проверки или загрузки в редактор деталей.

В файле метаданных (это файл формата .xml, переименованный в .fzp) перечислены название детали, описание и другие свойства, а также ссылки на SVG-файлы детали. В нем также указаны разъемы детали и внутренние шины. Графическое изображение каждого соединителя (разъёма) представляет собой элемент, найденный в соответствующем файле SVG. Поскольку любой SVG-элемент может иметь атрибут id, файл метаданных ссылается на графический элемент соединителя, используя id этого элемента.

#### Структура папок

Файлы метаданных для всех деталей, поставляемых с Fritzing, можно найти в ***fritzing-parts*** папке в следующих подпапках:

```
Папка	                Описание
-----------------------------------------------------------------
fritzing-parts/core     файлы метаданных всех деталей в ядре
fritzing-parts/contrib  файлы метаданных всех добавленных деталей 
fritzing-parts/obsolete файлы метаданных устаревших деталей для обратной совместимости
```
В папке ***fritzing-parts/svg*** вы найдете соответствующие подпапки core, contrib и obsolete. Структура подпапки core (базовой библиотеки элементов) выглядит следующим образом:

```
Папка	                            Описание
-----------------------------------------------------------------
fritzing-parts/svg/core/breadboard	SVG-файлы для макетного представления деталей (частей) 
fritzing-parts/svg/core/icon	    SVG-файлы для значков деталей 
fritzing-parts/svg/core/pcb 	    SVG-файлы  для отображения деталей на печатной плате (footprints)
fritzing-parts/svg/core/schematic	SVG-файлы  для схематического представления деталей
```
Структура других подпапок (contrib и obsolete) аналогична подпапке элементов базовой библиотеки (core).

Начиная с версии 0.9.3, папка ***fritzing-parts*** фактически является git-клоном [https://github.com/fritzing/fritzing-parts](https://github.com/fritzing/fritzing-parts). Fritzing проверяет репозиторий github на наличие обновлений при каждом запуске и выполняет "git pull", если пользователь согласен.

Во Fritzing некоторые детали создаются "на лету", а не просто загружаются, например, линейки, резисторы, штыревые головки, типовые углубления (при изменении своих параметров). Шаблоны для этих деталей компилируются вместе с программой.

Детали, которые создаются пользователем, хранятся в пользовательском каталоге (user), чтобы не потеряться при установке новых версий Fritzing. Для Windows эта папка - ***C:/Users/username/Documents/Fritzing/parts***.

При работе приложения создаются некоторые временные файлы, связанные с деталями, которые участвуют в проектирование схемы (модели). Для Windows эти файлы хранятся в папке ***C:/Users/username/AppData/Roaming/Fritzing***.

Файлы проектов - это файлы ***.fzz***. Они размещаются в одноименной папке ***fzz***. Папка ***partfactory*** содержит файлы для созданных деталей, такие как заголовки выводов (пины) и типовые углубления (отверстия).

До версии 0.9.2 здесь также хранились пользовательские детали.

Расположение файла svg любой детали можно узнать открыв её в редакторе деталей. После переключения на нужный вид (макет - breadboard, схема - schematic, печатная плата - pcb или значок - icon) следует выбрать : Переключитесь на интересующий вас вид и выберите "Показать в папке" (Show in folder) в меню Файл.

Базовые детали Fritzing (детали ядра) собираются в базу данных Sqlite с использованием данных из файлов fzp. Эта база данных используется для замены деталей (Sqlite обеспечивает быстрый механизм переключения между связанными деталями). Для компиляции базы данных запустите Fritzing из командной строки: ***fritzing.exe -db path/to/parts/parts.db*** или выберите ***"Компонент"*** -> ***"Восстановить базу данных компонентов"*** в меню.

#### [Формат FZP](LCD-FM-RX-V2.0.xml)

Файл метаданных компонента (детали) ***.fzp*** представляет собой xml-файл. 

Самым внешним элементом в файле FZP всегда является тег ***\<module\>***. Важен атрибут ***ModuleID*** - он должен быть уникальным для каждой детали. Fritzing отклонит деталь, если она уже загружена с таким же ModuleID. Атрибут ***fritzingVersion*** указывает какой версией Fritzing был сгенерирован компонент. Для указания атрибута fritzingVersion вручную лучше всего запустить Fritzing и открыть окно "About", из которого вы можете скопировать строку "version". Первая часть строки является наиболее важной: в приведенном выше примере это означает просто “0.3.15b”.
```
<?xml version='1.0' encoding='UTF-8'?>
<module  
  fritzingVersion="0.3.15b.02.03.3943" 
  moduleId="LCD-FM-RX-V2.0_52aa9f163650adf1bd33aebd1592fa04_1"
  referenceFile="GLCD 128x64.fzp">
  
  <author>Vladimir Trufanov</author>
  <title>LCD-FM-RX-V2.0</title>
  <label>LCD-FM-RX-V2.0</label>
  <date>Sun Feb 18 2024</date>
  <description>Модуль цифрового стереорадиоприемника DSP PLL FM Receiver</description>
  <url>https://www.doortry.ru</url>
     
  <tags>
    <tag>FM radio</tag>
  </tags>

  - - - - -
</module>
```
Контекст следующих строк от ***\<author\>*** до ***\</tags\>*** очевиден без комментариев.

Элемент ***\<label\>*** - это строка метки детали по умолчанию, когда она появляется в эскизе Fritzing.

Элемент ***\<description\>*** - краткое описание детали, может быть обычным текстом или в формате расширенного текста. Форматированный текст - это подмножество html, которое может отображаться в определенных виджетах Qt (Qt - базовый графический интерфейс Fritzing). Если используется форматированный текст, он должен быть экранирован в формате xml, чтобы не запутаться в xml-структуре FZP-файла.

```
<description>
  &lt;!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd">
&lt;html>&lt;head>&lt;meta name="qrichtext" content="1" />&lt;meta charset="utf-8" />&lt;style type="text/css">
p, li { white-space: pre-wrap; }
hr { height: 1px; border-width: 0; }
li.unchecked::marker { content: "\2610"; }
li.checked::marker { content: "\2612"; }
&lt;/style>&lt;/head>&lt;body style=" font-family:'Segoe UI'; font-size:9pt; font-weight:400; font-style:normal;">
&lt;p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Модуль цифрового стереорадиоприемника DSP PLL FM Receiver Module 87 МГц [или 76 МГц]-108 МГц с управлением через последовательный порт&lt;/p>
&lt;p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:0;">&lt;br />&lt;/p>&lt;/body>&lt;/html></description>
</module>

```
В настоящее время мы мало что делаем с tags, но во Fritzing вы можете выполнять поиск деталей из корзины Parts , и теги включаются в этот поиск. Вероятно, вам следует заменить “fritzing user” на “fritzing core", если вы создаете пользовательскую деталь.


Устаревшие детали используют синтаксис специальной версии. <version replacedby=""> Значением атрибута replacedby является ModuleID детали, которая заменяет устаревшую деталь. В папке pdb/устаревшие есть много примеров этого. Атрибут replacedby также может быть применен к отдельным соединителям; смотрите раздел "Соединители" ниже.


### Библиография

### [Part file format - https://github.com/fritzing/fritzing-app/wiki/2.1-Part-file-format](https://github.com/fritzing/fritzing-app/wiki/2.1-Part-file-format) 